"use strict";(self.webpackChunkcolegio_web_angular=self.webpackChunkcolegio_web_angular||[]).push([[375],{9375:(C,d,l)=>{l.r(d),l.d(d,{AdminNoticiasCreatePage:()=>M});var u=l(2200),g=l(9417),m=l(2615),e=l(3664),_=l(7693);function h(a,r){if(1&a){const s=e.RV6();e.j41(0,"input",16),e.mxI("ngModelChange",function(i){m.eBV(s);const t=e.XpG();return e.DH7(t.imagenUrl,i)||(t.imagenUrl=i),m.Njj(i)}),e.k0s()}if(2&a){const s=e.XpG();e.R50("ngModel",s.imagenUrl)}}function f(a,r){if(1&a){const s=e.RV6();e.j41(0,"input",17),e.bIt("change",function(i){m.eBV(s);const t=e.XpG();return m.Njj(t.onFile(i))}),e.k0s()}}function p(a,r){if(1&a&&(e.j41(0,"div",18),e.nrm(1,"img",19),e.k0s()),2&a){const s=r.ngIf;e.R7$(),e.Y8G("src",s,e.B4B)}}let M=(()=>{var a;class r{constructor(o){this.srv=o,this.titulo="",this.texto="",this.fecha="",this.imageMode="url",this.imagenUrl="",this.imagenB64=""}onFile(o){const i=o.target.files?.[0];if(!i)return;const t=new FileReader;t.onload=()=>this.imagenB64=t.result,t.readAsDataURL(i)}preview(){return"url"===this.imageMode?this.imagenUrl?.trim()||null:this.imagenB64||null}crear(){if(!this.titulo.trim()||!this.texto.trim())return void alert("Falta t\xedtulo o texto");const o="url"===this.imageMode?this.imagenUrl?.trim()||void 0:this.imagenB64||void 0;this.srv.crear({titulo:this.titulo.trim(),texto:this.texto.trim(),fecha:this.fecha||void 0,imagen:o}).subscribe({next:()=>{alert("Noticia creada \u2714"),this.titulo="",this.texto="",this.fecha="",this.imagenUrl="",this.imagenB64="",this.imageMode="url"},error:i=>{console.error(i),alert("No se pudo crear la noticia")}})}static#e=a=()=>(this.\u0275fac=function(i){return new(i||r)(e.rXU(_.g))},this.\u0275cmp=e.VBU({type:r,selectors:[["app-admin-noticias-create"]],decls:30,vars:14,consts:[[1,"h4","mb-3"],[1,"card","shadow-sm"],[1,"card-body"],[1,"mb-2"],[1,"form-label"],[1,"form-control",3,"ngModelChange","ngModel"],["rows","4",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label","d-block"],["role","group",1,"btn-group","btn-group-sm","mb-2"],["type","button",1,"btn",3,"click"],["class","form-control","placeholder","https://sitio.com/imagen.jpg",3,"ngModel","ngModelChange",4,"ngIf"],["type","file","class","form-control",3,"change",4,"ngIf"],["class","mt-2",4,"ngIf"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid"],[1,"btn","btn-success",3,"click"],["placeholder","https://sitio.com/imagen.jpg",1,"form-control",3,"ngModelChange","ngModel"],["type","file",1,"form-control",3,"change"],[1,"mt-2"],[1,"rounded","border",2,"width","160px","height","120px","object-fit","cover",3,"src"]],template:function(i,t){1&i&&(e.j41(0,"h2",0),e.EFF(1,"Crear noticia"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),e.EFF(6,"T\xedtulo*"),e.k0s(),e.j41(7,"input",5),e.mxI("ngModelChange",function(n){return e.DH7(t.titulo,n)||(t.titulo=n),n}),e.k0s()(),e.j41(8,"div",3)(9,"label",4),e.EFF(10,"Texto*"),e.k0s(),e.j41(11,"textarea",6),e.mxI("ngModelChange",function(n){return e.DH7(t.texto,n)||(t.texto=n),n}),e.k0s()(),e.j41(12,"div",3)(13,"label",7),e.EFF(14,"Imagen"),e.k0s(),e.j41(15,"div",8)(16,"button",9),e.bIt("click",function(){return t.imageMode="url"}),e.EFF(17,"URL"),e.k0s(),e.j41(18,"button",9),e.bIt("click",function(){return t.imageMode="file"}),e.EFF(19,"Archivo"),e.k0s()(),e.DNE(20,h,1,1,"input",10)(21,f,1,0,"input",11)(22,p,2,1,"div",12),e.k0s(),e.j41(23,"div",3)(24,"label",4),e.EFF(25,"Fecha"),e.k0s(),e.j41(26,"input",13),e.mxI("ngModelChange",function(n){return e.DH7(t.fecha,n)||(t.fecha=n),n}),e.k0s()(),e.j41(27,"div",14)(28,"button",15),e.bIt("click",function(){return t.crear()}),e.EFF(29,"Crear noticia"),e.k0s()()()()),2&i&&(e.R7$(7),e.R50("ngModel",t.titulo),e.R7$(4),e.R50("ngModel",t.texto),e.R7$(5),e.AVh("btn-primary","url"===t.imageMode)("btn-outline-primary","url"!==t.imageMode),e.R7$(2),e.AVh("btn-primary","file"===t.imageMode)("btn-outline-primary","file"!==t.imageMode),e.R7$(2),e.Y8G("ngIf","url"===t.imageMode),e.R7$(),e.Y8G("ngIf","file"===t.imageMode),e.R7$(),e.Y8G("ngIf",t.preview()),e.R7$(4),e.R50("ngModel",t.fecha))},dependencies:[u.MD,u.bT,g.YN,g.me,g.BC,g.vS],encapsulation:2}))}return a(),r})()}}]);