"use strict";(self.webpackChunkcolegio_web_angular=self.webpackChunkcolegio_web_angular||[]).push([[397],{2397:(A,_,s)=>{s.r(_),s.d(_,{AdminDocentesCreatePage:()=>w});var p=s(2200),g=s(9417),d=s(7468),u=s(7673),h=s(5558),m=s(2615),e=s(3664),f=s(6810);function F(a,l){if(1&a){const i=e.RV6();e.j41(0,"input",44),e.mxI("ngModelChange",function(r){m.eBV(i);const n=e.XpG();return e.DH7(n.newDoc.fotografiaUrl,r)||(n.newDoc.fotografiaUrl=r),m.Njj(r)}),e.k0s()}if(2&a){const i=e.XpG();e.R50("ngModel",i.newDoc.fotografiaUrl)}}function D(a,l){if(1&a){const i=e.RV6();e.j41(0,"input",45),e.bIt("change",function(r){m.eBV(i);const n=e.XpG();return m.Njj(n.onFile(r))}),e.k0s()}}function C(a,l){if(1&a&&(e.j41(0,"div",46),e.nrm(1,"img",47),e.k0s()),2&a){const i=e.XpG();e.R7$(),e.Y8G("src",i.newDoc.fotografiaUrl,e.B4B)}}function M(a,l){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&a){const i=e.XpG().$implicit;e.R7$(),e.SpI("(",i.anio,")")}}function E(a,l){if(1&a){const i=e.RV6();e.j41(0,"li")(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3),e.j41(4,"span",48),e.EFF(5),e.DNE(6,M,2,1,"span",49),e.k0s(),e.j41(7,"button",50),e.bIt("click",function(){const r=m.eBV(i).index,n=e.XpG();return m.Njj(n.newFormaciones.splice(r,1))}),e.EFF(8,"quitar"),e.k0s()()}if(2&a){const i=l.$implicit;e.R7$(2),e.JRh(i.titulo),e.R7$(),e.SpI(" \u2014 ",i.nivel||"\u2014"," "),e.R7$(2),e.SpI(" \xb7 ",i.institucion||"\u2014"," "),e.R7$(),e.Y8G("ngIf",i.anio)}}function b(a,l){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&a){const i=e.XpG().$implicit;e.R7$(),e.SpI("\u2192 ",i.hasta)}}function R(a,l){if(1&a){const i=e.RV6();e.j41(0,"li")(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3),e.j41(4,"span",48),e.EFF(5),e.DNE(6,b,2,1,"span",49),e.k0s(),e.j41(7,"button",50),e.bIt("click",function(){const r=m.eBV(i).index,n=e.XpG();return m.Njj(n.newExperiencias.splice(r,1))}),e.EFF(8,"quitar"),e.k0s()()}if(2&a){const i=l.$implicit;e.R7$(2),e.JRh(i.institucion),e.R7$(),e.SpI(" \u2014 ",i.rol||"\u2014"," "),e.R7$(2),e.SpI(" \xb7 ",i.desde||"\u2014"," "),e.R7$(),e.Y8G("ngIf",i.hasta)}}function k(a,l){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&a){const i=e.XpG().$implicit;e.R7$(),e.SpI("(",i.anio,")")}}function j(a,l){if(1&a){const i=e.RV6();e.j41(0,"li")(1,"strong"),e.EFF(2),e.k0s(),e.j41(3,"span",48),e.EFF(4),e.DNE(5,k,2,1,"span",49),e.k0s(),e.j41(6,"button",50),e.bIt("click",function(){const r=m.eBV(i).index,n=e.XpG();return m.Njj(n.newReconocimientos.splice(r,1))}),e.EFF(7,"quitar"),e.k0s()()}if(2&a){const i=l.$implicit;e.R7$(2),e.JRh(i.nombre),e.R7$(2),e.SpI(" \xb7 ",i.otorgante||"\u2014"," "),e.R7$(),e.Y8G("ngIf",i.anio)}}let w=(()=>{var a;class l{constructor(c){this.srv=c,this.imageMode="url",this.newDoc={nombreCompleto:"",aniosExperiencia:0,cargo:"",area:"",bio:"",fotografiaUrl:""},this.newFormaciones=[],this.newExperiencias=[],this.newReconocimientos=[],this.tmpFormacion={titulo:""},this.tmpExperiencia={institucion:""},this.tmpReconocimiento={nombre:""}}onFile(c){const r=c.target,n=r.files&&r.files[0];if(!n)return;const t=new FileReader;t.onload=()=>this.newDoc.fotografiaUrl=t.result,t.readAsDataURL(n)}pushFormacion(){this.tmpFormacion.titulo?.trim()&&(this.newFormaciones.push({...this.tmpFormacion}),this.tmpFormacion={titulo:""})}pushExperiencia(){this.tmpExperiencia.institucion?.trim()&&(this.newExperiencias.push({...this.tmpExperiencia}),this.tmpExperiencia={institucion:""})}pushReconocimiento(){this.tmpReconocimiento.nombre?.trim()&&(this.newReconocimientos.push({...this.tmpReconocimiento}),this.tmpReconocimiento={nombre:""})}crearDocente(){this.newDoc.nombreCompleto?.trim()?this.srv.create({nombreCompleto:this.newDoc.nombreCompleto,aniosExperiencia:this.newDoc.aniosExperiencia??0,cargo:this.newDoc.cargo,area:this.newDoc.area,bio:this.newDoc.bio,fotografiaUrl:this.newDoc.fotografiaUrl}).pipe((0,h.n)(r=>{if(!r?.id)throw new Error("El backend no devolvi\xf3 ID del docente creado");const n=r.id,t=[...this.newFormaciones.map(o=>this.srv.addFormacion(n,o)),...this.newExperiencias.map(o=>this.srv.addExperiencia(n,o)),...this.newReconocimientos.map(o=>this.srv.addReconocimiento(n,o))];return t.length?(0,d.p)(t):(0,u.of)(null)})).subscribe({next:()=>{alert("Docente creado \u2714"),this.newDoc={nombreCompleto:"",aniosExperiencia:0,cargo:"",area:"",bio:"",fotografiaUrl:""},this.newFormaciones=[],this.newExperiencias=[],this.newReconocimientos=[],this.tmpFormacion={titulo:""},this.tmpExperiencia={institucion:""},this.tmpReconocimiento={nombre:""}},error:r=>{console.error("[CrearDocente] error",r),alert("\u274c No se pudo crear el docente. Revisa que el backend est\xe9 arriba y que el proxy apunte al puerto correcto.")}}):alert("El nombre es obligatorio")}static#e=a=()=>(this.\u0275fac=function(r){return new(r||l)(e.rXU(f.Z))},this.\u0275cmp=e.VBU({type:l,selectors:[["app-admin-docentes-create"]],decls:119,vars:32,consts:[[1,"h4","mb-3"],[1,"card","shadow-sm"],[1,"card-body"],[1,"mb-2"],[1,"form-label"],["name","new_nombre",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-2","row"],[1,"col"],["type","number","name","new_anios",1,"form-control",3,"ngModelChange","ngModel"],["name","new_cargo",1,"form-control",3,"ngModelChange","ngModel"],["name","new_area",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label","d-block"],["role","group","aria-label","image mode",1,"btn-group","btn-group-sm","mb-2"],["type","button",1,"btn",3,"click"],["class","form-control","placeholder","https://sitio.com/foto.jpg","name","new_foto_url",3,"ngModel","ngModelChange",4,"ngIf"],["type","file","class","form-control",3,"change",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"text-muted","d-block","mt-1"],["rows","2","name","new_bio",1,"form-control",3,"ngModelChange","ngModel"],[1,"small","mb-2"],[4,"ngFor","ngForOf"],[1,"row","g-2","align-items-end","mb-3"],[1,"col-12","col-md-4"],["name","t_f_titulo",1,"form-control",3,"ngModelChange","ngModel"],["name","t_f_inst",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-6","col-md-2"],["name","t_f_nivel",1,"form-control",3,"ngModelChange","ngModel"],["name","t_f_anio","maxlength","4",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"col-12","col-md-6"],["name","t_x_inst",1,"form-control",3,"ngModelChange","ngModel"],["name","t_x_rol",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-6","col-md-3"],["type","date","name","t_x_desde",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","t_x_hasta",1,"form-control",3,"ngModelChange","ngModel"],["name","t_x_desc",1,"form-control",3,"ngModelChange","ngModel"],["name","t_r_nom",1,"form-control",3,"ngModelChange","ngModel"],["name","t_r_ot",1,"form-control",3,"ngModelChange","ngModel"],["name","t_r_anio","maxlength","4",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","col-md-10"],["name","t_r_desc",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid"],[1,"btn","btn-success",3,"click"],["placeholder","https://sitio.com/foto.jpg","name","new_foto_url",1,"form-control",3,"ngModelChange","ngModel"],["type","file",1,"form-control",3,"change"],[1,"mt-2"],["alt","preview",1,"rounded","border",2,"width","120px","height","120px","object-fit","cover",3,"src"],[1,"text-muted"],[4,"ngIf"],[1,"btn","btn-link","btn-sm","text-danger",3,"click"]],template:function(r,n){1&r&&(e.j41(0,"h2",0),e.EFF(1,"Crear docente"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"label",4),e.EFF(6,"Nombre*"),e.k0s(),e.j41(7,"input",5),e.mxI("ngModelChange",function(o){return e.DH7(n.newDoc.nombreCompleto,o)||(n.newDoc.nombreCompleto=o),o}),e.k0s()(),e.j41(8,"div",6)(9,"div",7)(10,"label",4),e.EFF(11,"A\xf1os de experiencia"),e.k0s(),e.j41(12,"input",8),e.mxI("ngModelChange",function(o){return e.DH7(n.newDoc.aniosExperiencia,o)||(n.newDoc.aniosExperiencia=o),o}),e.k0s()(),e.j41(13,"div",7)(14,"label",4),e.EFF(15,"Cargo"),e.k0s(),e.j41(16,"input",9),e.mxI("ngModelChange",function(o){return e.DH7(n.newDoc.cargo,o)||(n.newDoc.cargo=o),o}),e.k0s()()(),e.j41(17,"div",6)(18,"div",7)(19,"label",4),e.EFF(20,"\xc1rea"),e.k0s(),e.j41(21,"input",10),e.mxI("ngModelChange",function(o){return e.DH7(n.newDoc.area,o)||(n.newDoc.area=o),o}),e.k0s()(),e.j41(22,"div",7)(23,"label",11),e.EFF(24,"Imagen"),e.k0s(),e.j41(25,"div",12)(26,"button",13),e.bIt("click",function(){return n.imageMode="url"}),e.EFF(27,"URL"),e.k0s(),e.j41(28,"button",13),e.bIt("click",function(){return n.imageMode="file"}),e.EFF(29,"Archivo"),e.k0s()(),e.DNE(30,F,1,1,"input",14)(31,D,1,0,"input",15)(32,C,2,1,"div",16),e.j41(33,"small",17),e.EFF(34,"Puedes pegar una URL o subir un archivo; se guardar\xe1 en el mismo campo."),e.k0s()()(),e.j41(35,"div",3)(36,"label",4),e.EFF(37,"Bio"),e.k0s(),e.j41(38,"textarea",18),e.mxI("ngModelChange",function(o){return e.DH7(n.newDoc.bio,o)||(n.newDoc.bio=o),o}),e.k0s()(),e.nrm(39,"hr"),e.j41(40,"h6",3),e.EFF(41,"Formaciones"),e.k0s(),e.j41(42,"ul",19),e.DNE(43,E,9,4,"li",20),e.k0s(),e.j41(44,"div",21)(45,"div",22)(46,"label",4),e.EFF(47,"T\xedtulo*"),e.k0s(),e.j41(48,"input",23),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpFormacion.titulo,o)||(n.tmpFormacion.titulo=o),o}),e.k0s()(),e.j41(49,"div",22)(50,"label",4),e.EFF(51,"Instituci\xf3n"),e.k0s(),e.j41(52,"input",24),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpFormacion.institucion,o)||(n.tmpFormacion.institucion=o),o}),e.k0s()(),e.j41(53,"div",25)(54,"label",4),e.EFF(55,"Nivel"),e.k0s(),e.j41(56,"input",26),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpFormacion.nivel,o)||(n.tmpFormacion.nivel=o),o}),e.k0s()(),e.j41(57,"div",25)(58,"label",4),e.EFF(59,"A\xf1o"),e.k0s(),e.j41(60,"input",27),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpFormacion.anio,o)||(n.tmpFormacion.anio=o),o}),e.k0s()(),e.j41(61,"div",28)(62,"button",29),e.bIt("click",function(){return n.pushFormacion()}),e.EFF(63,"A\xf1adir formaci\xf3n"),e.k0s()()(),e.j41(64,"h6",3),e.EFF(65,"Experiencias"),e.k0s(),e.j41(66,"ul",19),e.DNE(67,R,9,4,"li",20),e.k0s(),e.j41(68,"div",21)(69,"div",30)(70,"label",4),e.EFF(71,"Instituci\xf3n*"),e.k0s(),e.j41(72,"input",31),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpExperiencia.institucion,o)||(n.tmpExperiencia.institucion=o),o}),e.k0s()(),e.j41(73,"div",30)(74,"label",4),e.EFF(75,"Rol"),e.k0s(),e.j41(76,"input",32),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpExperiencia.rol,o)||(n.tmpExperiencia.rol=o),o}),e.k0s()(),e.j41(77,"div",33)(78,"label",4),e.EFF(79,"Desde"),e.k0s(),e.j41(80,"input",34),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpExperiencia.desde,o)||(n.tmpExperiencia.desde=o),o}),e.k0s()(),e.j41(81,"div",33)(82,"label",4),e.EFF(83,"Hasta"),e.k0s(),e.j41(84,"input",35),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpExperiencia.hasta,o)||(n.tmpExperiencia.hasta=o),o}),e.k0s()(),e.j41(85,"div",30)(86,"label",4),e.EFF(87,"Descripci\xf3n"),e.k0s(),e.j41(88,"input",36),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpExperiencia.descripcion,o)||(n.tmpExperiencia.descripcion=o),o}),e.k0s()(),e.j41(89,"div",28)(90,"button",29),e.bIt("click",function(){return n.pushExperiencia()}),e.EFF(91,"A\xf1adir experiencia"),e.k0s()()(),e.j41(92,"h6",3),e.EFF(93,"Reconocimientos"),e.k0s(),e.j41(94,"ul",19),e.DNE(95,j,8,3,"li",20),e.k0s(),e.j41(96,"div",21)(97,"div",30)(98,"label",4),e.EFF(99,"Nombre*"),e.k0s(),e.j41(100,"input",37),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpReconocimiento.nombre,o)||(n.tmpReconocimiento.nombre=o),o}),e.k0s()(),e.j41(101,"div",30)(102,"label",4),e.EFF(103,"Otorgante"),e.k0s(),e.j41(104,"input",38),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpReconocimiento.otorgante,o)||(n.tmpReconocimiento.otorgante=o),o}),e.k0s()(),e.j41(105,"div",25)(106,"label",4),e.EFF(107,"A\xf1o"),e.k0s(),e.j41(108,"input",39),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpReconocimiento.anio,o)||(n.tmpReconocimiento.anio=o),o}),e.k0s()(),e.j41(109,"div",40)(110,"label",4),e.EFF(111,"Descripci\xf3n"),e.k0s(),e.j41(112,"input",41),e.mxI("ngModelChange",function(o){return e.DH7(n.tmpReconocimiento.descripcion,o)||(n.tmpReconocimiento.descripcion=o),o}),e.k0s()(),e.j41(113,"div",28)(114,"button",29),e.bIt("click",function(){return n.pushReconocimiento()}),e.EFF(115,"A\xf1adir reconocimiento"),e.k0s()()(),e.j41(116,"div",42)(117,"button",43),e.bIt("click",function(){return n.crearDocente()}),e.EFF(118,"Crear docente"),e.k0s()()()()),2&r&&(e.R7$(7),e.R50("ngModel",n.newDoc.nombreCompleto),e.R7$(5),e.R50("ngModel",n.newDoc.aniosExperiencia),e.R7$(4),e.R50("ngModel",n.newDoc.cargo),e.R7$(5),e.R50("ngModel",n.newDoc.area),e.R7$(5),e.AVh("btn-primary","url"===n.imageMode)("btn-outline-primary","url"!==n.imageMode),e.R7$(2),e.AVh("btn-primary","file"===n.imageMode)("btn-outline-primary","file"!==n.imageMode),e.R7$(2),e.Y8G("ngIf","url"===n.imageMode),e.R7$(),e.Y8G("ngIf","file"===n.imageMode),e.R7$(),e.Y8G("ngIf",n.newDoc.fotografiaUrl),e.R7$(6),e.R50("ngModel",n.newDoc.bio),e.R7$(5),e.Y8G("ngForOf",n.newFormaciones),e.R7$(5),e.R50("ngModel",n.tmpFormacion.titulo),e.R7$(4),e.R50("ngModel",n.tmpFormacion.institucion),e.R7$(4),e.R50("ngModel",n.tmpFormacion.nivel),e.R7$(4),e.R50("ngModel",n.tmpFormacion.anio),e.R7$(7),e.Y8G("ngForOf",n.newExperiencias),e.R7$(5),e.R50("ngModel",n.tmpExperiencia.institucion),e.R7$(4),e.R50("ngModel",n.tmpExperiencia.rol),e.R7$(4),e.R50("ngModel",n.tmpExperiencia.desde),e.R7$(4),e.R50("ngModel",n.tmpExperiencia.hasta),e.R7$(4),e.R50("ngModel",n.tmpExperiencia.descripcion),e.R7$(7),e.Y8G("ngForOf",n.newReconocimientos),e.R7$(5),e.R50("ngModel",n.tmpReconocimiento.nombre),e.R7$(4),e.R50("ngModel",n.tmpReconocimiento.otorgante),e.R7$(4),e.R50("ngModel",n.tmpReconocimiento.anio),e.R7$(4),e.R50("ngModel",n.tmpReconocimiento.descripcion))},dependencies:[p.MD,p.Sq,p.bT,g.YN,g.me,g.Q0,g.BC,g.tU,g.vS],encapsulation:2}))}return a(),l})()}}]);