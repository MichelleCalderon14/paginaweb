"use strict";(self.webpackChunkcolegio_web_angular=self.webpackChunkcolegio_web_angular||[]).push([[923],{7923:(v,g,r)=>{r.r(g),r.d(g,{AdminNoticiasEditPage:()=>h});var _=r(2200),d=r(9417),o=r(2615),i=r(3664),m=r(7693);function u(l,c){if(1&l&&i.nrm(0,"img",21),2&l){const a=i.XpG().$implicit;i.Y8G("src",a.imagen,i.B4B)}}function f(l,c){if(1&l){const a=i.RV6();i.j41(0,"div",5)(1,"div",6),i.DNE(2,u,1,1,"img",7),i.j41(3,"div",8)(4,"div",9)(5,"label",10),i.EFF(6,"T\xedtulo"),i.k0s(),i.j41(7,"input",11),i.mxI("ngModelChange",function(t){const n=o.eBV(a).$implicit;return i.DH7(n.titulo,t)||(n.titulo=t),o.Njj(t)}),i.k0s()(),i.j41(8,"div",9)(9,"label",10),i.EFF(10,"Texto"),i.k0s(),i.j41(11,"textarea",12),i.mxI("ngModelChange",function(t){const n=o.eBV(a).$implicit;return i.DH7(n.texto,t)||(n.texto=t),o.Njj(t)}),i.k0s()(),i.j41(12,"div",9)(13,"label",10),i.EFF(14,"Fecha"),i.k0s(),i.j41(15,"input",13),i.mxI("ngModelChange",function(t){const n=o.eBV(a).$implicit;return i.DH7(n.fecha,t)||(n.fecha=t),o.Njj(t)}),i.k0s()(),i.j41(16,"div",9)(17,"label",14),i.EFF(18,"Cambiar imagen"),i.k0s(),i.j41(19,"input",15),i.mxI("ngModelChange",function(t){const n=o.eBV(a).$implicit;return i.DH7(n.imagen,t)||(n.imagen=t),o.Njj(t)}),i.k0s(),i.j41(20,"div",16),i.EFF(21,"\u2014 o \u2014"),i.k0s(),i.j41(22,"input",17),i.bIt("change",function(t){const n=o.eBV(a).$implicit,s=i.XpG(2);return o.Njj(s.onFile(t,n))}),i.k0s()(),i.j41(23,"div",18)(24,"button",19),i.bIt("click",function(){const t=o.eBV(a).$implicit,n=i.XpG(2);return o.Njj(n.guardar(t))}),i.EFF(25,"Guardar"),i.k0s(),i.j41(26,"button",20),i.bIt("click",function(){const t=o.eBV(a).$implicit,n=i.XpG(2);return o.Njj(n.borrar(t))}),i.EFF(27,"Eliminar"),i.k0s()()()()()}if(2&l){const a=c.$implicit;i.R7$(2),i.Y8G("ngIf",a.imagen),i.R7$(5),i.R50("ngModel",a.titulo),i.R7$(4),i.R50("ngModel",a.texto),i.R7$(4),i.R50("ngModel",a.fecha),i.R7$(4),i.R50("ngModel",a.imagen)}}function p(l,c){if(1&l&&(i.j41(0,"div",3),i.DNE(1,f,28,5,"div",4),i.k0s()),2&l){const a=i.XpG();i.R7$(),i.Y8G("ngForOf",a.noticias)}}function E(l,c){1&l&&(i.j41(0,"div",22),i.EFF(1,"No hay noticias cargadas."),i.k0s())}let h=(()=>{var l;class c{constructor(e){this.srv=e,this.noticias=[]}ngOnInit(){this.srv.listar().subscribe(e=>this.noticias=e||[])}onFile(e,t){const n=e.target.files?.[0];if(!n)return;const s=new FileReader;s.onload=()=>t.imagen=s.result,s.readAsDataURL(n)}guardar(e){const t={titulo:e.titulo?.trim(),texto:e.texto?.trim(),fecha:e.fecha||void 0,imagen:e.imagen||void 0};this.srv.actualizar(e.id,t).subscribe({next:()=>alert("Noticia actualizada \u2714"),error:n=>{console.error(n),alert("No se pudo actualizar la noticia")}})}borrar(e){confirm(`\xbfEliminar "${e.titulo}"?`)&&this.srv.eliminar(e.id).subscribe({next:()=>this.noticias=this.noticias.filter(t=>t.id!==e.id),error:t=>{console.error(t),alert("No se pudo eliminar la noticia")}})}static#i=l=()=>(this.\u0275fac=function(t){return new(t||c)(i.rXU(m.g))},this.\u0275cmp=i.VBU({type:c,selectors:[["app-admin-noticias-edit"]],decls:5,vars:2,consts:[["vacio",""],[1,"h4","mb-3"],["class","row g-3",4,"ngIf","ngIfElse"],[1,"row","g-3"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4"],[1,"card","shadow-sm","h-100"],["class","card-img-top","alt","",3,"src",4,"ngIf"],[1,"card-body"],[1,"mb-2"],[1,"form-label"],[1,"form-control",3,"ngModelChange","ngModel"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label","d-block"],["placeholder","URL de imagen (opcional)",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"text-center","my-2"],["type","file",1,"form-control",3,"change"],[1,"d-flex","gap-2"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["alt","",1,"card-img-top",3,"src"],[1,"alert","alert-info"]],template:function(t,n){if(1&t&&(i.j41(0,"h2",1),i.EFF(1,"Editar noticias"),i.k0s(),i.DNE(2,p,2,1,"div",2)(3,E,2,0,"ng-template",null,0,i.C5r)),2&t){const s=i.sdS(4);i.R7$(2),i.Y8G("ngIf",null==n.noticias?null:n.noticias.length)("ngIfElse",s)}},dependencies:[_.MD,_.Sq,_.bT,d.YN,d.me,d.BC,d.vS],encapsulation:2}))}return l(),c})()}}]);